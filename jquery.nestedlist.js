jQuery.fn.shift=function(t,n){var i=parseInt(this.css("left")),e=isNaN(i)?t:i+t;this.animate({left:e},n)},jQuery.fn.nestedList=function(t){function n(){return!1}function e(t,n){for(var i,e=t.find(n||"li:not(.leaf) > a:first-of-type"),s=e.length;s--;)i=e.eq(s),i.replaceWith(i.html())}function s(t,n){t.find(n||".leaf a:first-of-type").each(function(){var t=$(this);t.parent().parent().click(function(){return document.location.href=t.attr("href"),!1}).css("cursor","pointer")})}function o(t,n){var i=n.children(),e=i.filter("li"),s=e.eq(0).outerHeight(),o=e.length,r=o*s;return t.height(r),e}function r(i){function r(){return u(i,v),!1}function a(){p.off("click",r),p.click(n)}function f(t){v&&v.removeClass("active"),v=t.addClass("active")}function c(t,n){if(nextList=n.children("ul"),k(1,nextList),f(n),nextList.length){nextList.show(),g(p,nextList);var i=n.siblings(),e=nextList.find("li");i.length+1>e.length&&i.slice(-0,i.length-e.length).hide(),a(),x.complete=function(){p.click(r),m(1,nextList)},t.shift(-L,x),o(t,nextList)}}function u(t,n){if(v){var i=n.children("ul"),e=n.parent("ul");k(-1,e),n.siblings().show(),e.hasClass(d)?v=!1:(g(p,e),f(e.parent("li"))),o(t,e),a(),x.complete=function(){p.click(r),i.hide(),m(-1,e)},t.shift(L,x)}}function h(t){var n=$(this);return i.is(":animated")?!1:(c(i,n),void t.stopPropagation())}var d=l();i.addClass(d);var p,v=!1;t&&t.upButtonSelector?p=$(t.upButtonSelector):(p=i.nextAll(".nestedlist-up"),1==p.length?p.remove():p=$("<div><div>back</div></div>").addClass("nestedlist-up"));var g=t&&t.upButtonShow||function(t,n){n.prepend(t)},L=i.children("li:first").width()+20,k=t&&t.onBeforeChange||function(){},m=t&&t.onAfterChange||function(){},x=t.shiftAnimation||{};i.css({position:"relative"}),i.find("ul").css({position:"absolute",left:L+"px",top:"0px"}).hide(),i.find("li:not(:has(ul))").addClass("leaf"),i.find("li:not(.leaf)").hover(function(t){$(this).addClass("hover"),t.stopPropagation()},function(t){$(this).removeClass("hover"),t.stopPropagation()}).click(h),t.noScriptLinks&&e(i,"string"==typeof t.noScriptLinks&&t.noScriptLinks),s(i,t.leafItemLink)}var l=function(){var t=0;return function(){return t+=1,"nestedlist-"+t}}();for(i=0;i<this.length;i+=1)r($(this[i]));return this};