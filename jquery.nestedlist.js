/* jquery.nestedlist.src.js 2012-11-6 | https://github.com/Intera/jquery.nestedlist */jQuery.fn.shift=function(e,t){var n=parseInt(this.css("left")),r=isNaN(n)?e:n+e;this.animate({left:r},{complete:t})},jQuery.fn.nestedList=function(e){function t(){return!1}function n(){return!1}function s(e,t){var n=t.children(),r=n.filter("li"),i=r.eq(0).outerHeight(),s=r.length,o=s*i,u=n.not("li");otherElLength=u.length;while(otherElLength--)o+=u.eq(otherElLength).outerHeight();return e.height(o),r}function o(n){function a(e){return v(n,o),!1}function h(){u.off("click",a),u.click(t)}function p(e){o&&o.removeClass("active"),o=e.addClass("active")}function d(e,t){nextList=t.children("ul"),l(1,nextList),p(t);if(nextList.length){nextList.show(),nextList.prepend(u);var n=t.siblings(),r=nextList.find("li");n.length+1>r.length&&n.slice(0,n.length-r.length).hide(),h(),e.shift(-f,function(){u.click(a),c(1,nextList)}),s(e,nextList)}}function v(e,t){if(o){var n=t.children("ul"),r=t.parent("ul");l(-1,r),t.siblings().show(),r.hasClass(i)?o=!1:(r.prepend(u),p(r.parent("li"))),s(e,r),h(),e.shift(f,function(){u.click(a),n.hide(),c(-1,r)})}}function m(e){var t=$(this);if(n.is(":animated")||t.hasClass("leaf"))return!1;d(n,t),e.stopPropagation()}var i=r();n.addClass(i);var o=!1,u=$("<div><div>Zur√ºck</div></div>").addClass("nestedlist-up"),f=n.children("li:first").width()+20,l=e&&e.onBeforeChange?e.onBeforeChange:function(){},c=e&&e.onAfterChange?e.onAfterChange:function(){};n.css({position:"relative"}),n.find("ul").css({position:"absolute",left:f+"px",top:"0px"}).hide(),n.find("li:not(li:has(ul))").addClass("leaf"),n.find("li").hover(function(e){$(this).addClass("hover"),e.stopPropagation()},function(e){$(this).removeClass("hover"),e.stopPropagation()}),n.find("li").click(m)}var r=function(){var e=0;return function(){var t=function(){return"nestedlist-"+e},n=t();while($(n).length)n=t(e),e+=1;return n}}();for(i=0;i<this.length;i+=1)o($(this[i]));return this};